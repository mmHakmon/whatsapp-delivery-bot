<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>×”×’×“×¨×•×ª - M.M.H Delivery</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, system-ui, sans-serif;
      background: #0f172a;
      color: white;
      padding-bottom: 100px;
    }
    .header {
      background: #1e293b;
      border-bottom: 1px solid #475569;
      position: sticky;
      top: 0;
      z-index: 40;
      padding: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .back-btn {
      width: 2.5rem;
      height: 2.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 0.5rem;
      background: #334155;
      border: none;
      color: white;
      cursor: pointer;
    }
    .header-title { flex: 1; }
    .header-title h1 { font-size: 1.25rem; font-weight: 700; }
    .header-title p { font-size: 0.875rem; color: #9ca3af; }
    .container { padding: 1rem; max-width: 600px; margin: 0 auto; }
    
    .section {
      background: #1e293b;
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1rem;
      border: 1px solid #475569;
    }
    .section-title {
      font-size: 1.125rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: #6366f1;
    }
    .setting-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      background: #0f172a;
      border-radius: 0.75rem;
      margin-bottom: 0.75rem;
      border: 1px solid #334155;
    }
    .setting-item:last-child { margin-bottom: 0; }
    .setting-info { flex: 1; }
    .setting-label {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }
    .setting-desc {
      font-size: 0.875rem;
      color: #9ca3af;
    }
    
    .toggle {
      position: relative;
      width: 50px;
      height: 28px;
    }
    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #334155;
      transition: .4s;
      border-radius: 28px;
    }
    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      right: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    input:checked + .toggle-slider {
      background-color: #6366f1;
    }
    input:checked + .toggle-slider:before {
      transform: translateX(-22px);
    }
    
    .btn {
      width: 100%;
      padding: 0.75rem;
      border-radius: 0.75rem;
      font-weight: 600;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: all 0.2s;
      margin-top: 0.75rem;
    }
    .btn-danger {
      background: #dc2626;
      color: white;
    }
    .btn:hover { opacity: 0.9; }
    
    .alert {
      padding: 1rem;
      border-radius: 0.75rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.3);
      color: #818cf8;
    }
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <header class="header">
    <button class="back-btn" onclick="goBack()">
      <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
    </button>
    <div class="header-title">
      <h1>×”×’×“×¨×•×ª</h1>
      <p>×”×ª×××” ××™×©×™×ª</p>
    </div>
  </header>

  <div class="container">
    <div id="alertBox" class="alert hidden">
      <span style="font-size: 1.5rem;">âœ…</span>
      <div id="alertMessage"></div>
    </div>

    <div class="section">
      <div class="section-title">ğŸ”” ×”×ª×¨××•×ª</div>
      
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-label">×”×ª×¨××•×ª ××©×œ×•×—×™×</div>
          <div class="setting-desc">×§×‘×œ ×”×ª×¨××” ×›×©×”××©×œ×•×— ×©×œ×š ××ª×¢×“×›×Ÿ</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="notifOrders" checked onchange="saveSetting('notifOrders', this.checked)">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-label">×”×ª×¨××•×ª WhatsApp</div>
          <div class="setting-desc">×§×‘×œ ×¢×“×›×•× ×™× ×“×¨×š WhatsApp</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="notifWhatsapp" checked onchange="saveSetting('notifWhatsapp', this.checked)">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-label">×”×ª×¨××•×ª ×“×—×™×¤×•×ª</div>
          <div class="setting-desc">×”×ª×¨××•×ª ×¢×œ ×©×™× ×•×™×™× ×—×©×•×‘×™× ×‘××©×œ×•×—</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="notifUrgent" checked onchange="saveSetting('notifUrgent', this.checked)">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <div class="section">
      <div class="section-title">ğŸ“ ×”×¢×“×¤×•×ª ××©×œ×•×—</div>
      
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-label">×©××•×¨ ×›×ª×•×‘×•×ª</div>
          <div class="setting-desc">×©××™×¨×ª ×›×ª×•×‘×•×ª × ×¤×•×¦×•×ª ×œ××™×œ×•×™ ××”×™×¨</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="saveAddresses" checked onchange="saveSetting('saveAddresses', this.checked)">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-label">××¢×§×‘ ×‘×–××Ÿ ×××ª</div>
          <div class="setting-desc">×¢×§×•×‘ ××—×¨×™ ××™×§×•× ×”×©×œ×™×— ×‘××¤×”</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="liveTracking" checked onchange="saveSetting('liveTracking', this.checked)">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <div class="section">
      <div class="section-title">ğŸ”’ ×¤×¨×˜×™×•×ª</div>
      
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-label">×©×ª×£ ××™×§×•× ×¢× ×©×œ×™×—</div>
          <div class="setting-desc">××¤×©×¨ ×œ×©×œ×™×— ×œ×¨××•×ª ××ª ××™×§×•××š ×”××“×•×™×§</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="shareLocation" onchange="saveSetting('shareLocation', this.checked)">
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-label">××¤×©×¨ ×—×™×•×’ ×™×©×™×¨</div>
          <div class="setting-desc">×©×œ×™×—×™× ×™×•×›×œ×• ×œ×”×ª×§×©×¨ ×™×©×™×¨×•×ª ×œ××¡×¤×¨ ×©×œ×š</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="allowCalls" checked onchange="saveSetting('allowCalls', this.checked)">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </div>

    <div class="section">
      <div class="section-title">âš™ï¸ ×›×œ×œ×™</div>
      
      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-label">××¦×‘ ×›×”×”</div>
          <div class="setting-desc">×××©×§ ×›×”×” ×œ× ×•×—×•×ª ×”×¢×™× ×™×™×</div>
        </div>
        <label class="toggle">
          <input type="checkbox" id="darkMode" checked disabled>
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="setting-item">
        <div class="setting-info">
          <div class="setting-label">×©×¤×”</div>
          <div class="setting-desc">×¢×‘×¨×™×ª</div>
        </div>
        <span style="color: #9ca3af;">ğŸ‡®ğŸ‡±</span>
      </div>
    </div>

    <div class="section">
      <div class="section-title">âš ï¸ ××–×•×¨ ××¡×•×›×Ÿ</div>
      
      <button class="btn btn-danger" onclick="confirmLogout()">
        <span>×”×ª× ×ª×§</span>
        <span>ğŸšª</span>
      </button>
    </div>

  </div>

  <script>
    let customerPhone = null;

    function init() {
      const urlParams = new URLSearchParams(window.location.search);
      customerPhone = urlParams.get('phone') || localStorage.getItem('customer_phone');
      
      if (!customerPhone) {
        window.location.href = '/customer/login';
        return;
      }

      loadSettings();
    }

    function loadSettings() {
      const settings = JSON.parse(localStorage.getItem('customer_settings') || '{}');
      
      Object.keys(settings).forEach(key => {
        const element = document.getElementById(key);
        if (element && element.type === 'checkbox') {
          element.checked = settings[key];
        }
      });
    }

    function saveSetting(key, value) {
      const settings = JSON.parse(localStorage.getItem('customer_settings') || '{}');
      settings[key] = value;
      localStorage.setItem('customer_settings', JSON.stringify(settings));
      
      showAlert(`×”×”×’×“×¨×” ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”`);
    }

    function confirmLogout() {
      if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×ª× ×ª×§?')) {
        localStorage.removeItem('customer_phone');
        localStorage.removeItem('customer_settings');
        localStorage.removeItem('customer_profile');
        window.location.href = '/customer/login';
      }
    }

    function showAlert(message) {
      const alertBox = document.getElementById('alertBox');
      const alertMessage = document.getElementById('alertMessage');
      
      alertMessage.textContent = message;
      alertBox.classList.remove('hidden');
      
      setTimeout(() => {
        alertBox.classList.add('hidden');
      }, 3000);
    }

    function goBack() {
      window.location.href = `/customer-dashboard.html?phone=${customerPhone}`;
    }

    init();
  </script>
</body>
</html>
